{"ast":null,"code":"var _jsxFileName = \"/home/kashyap_sri/Desktop/Shreyas/stock_market/frontend/src/Components/ticker.js\",\n  _s = $RefreshSig$();\nimport react, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst proxy = \"https://cors-anywhere.herokuapp.com/\";\nconst newUrl = `${proxy}https://query1.finance.yahoo.com/v8/finance/chart/AAPL?symbol=AAPL&period1=1634841000&period2=1660501800&useYfid=true&interval=1d&includePrePost=true&events=div%7Csplit%7Cearn&lang=en-US&region=US&crumb=m%2FlQLK.F88U&corsDomain=finance.yahoo.com`;\nasync function fetchData() {\n  const response = await fetch(newUrl);\n  return response.json();\n}\nexport default function Ticker() {\n  _s();\n  const [price, setPrice] = useState(0);\n  useEffect(() => {\n    let timeoutId;\n    async function getLatestPrice() {\n      try {\n        const data = await fetchData();\n        console.log(data);\n        const stock = data.chart.result[0];\n        setPrice(stock.meta.regularMarketPrice.toFixed(2));\n        setPriceTime(new Date(stock.meta.regularMarketTime * 1000));\n        const quote = stock.indicators.quote[0];\n        const prices = stock.timestamp.map((timestamp, index) => ({\n          x: new Date(timestamp * 1000),\n          y: [quote.open[index], quote.high[index], quote.low[index], quote.close[index]].map(round)\n        }));\n        setSeries([{\n          data: prices\n        }]);\n      } catch (error) {\n        console.log(error);\n      }\n      timeoutId = setTimeout(getLatestPrice, 5000 * 2);\n    }\n    getLatestPrice();\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Ticker\", price]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(Ticker, \"apk6b4sObUOkq2lHcnqRnz5+Uak=\");\n_c = Ticker;\nvar _c;\n$RefreshReg$(_c, \"Ticker\");","map":{"version":3,"names":["react","useState","useEffect","jsxDEV","_jsxDEV","proxy","newUrl","fetchData","response","fetch","json","Ticker","_s","price","setPrice","timeoutId","getLatestPrice","data","console","log","stock","chart","result","meta","regularMarketPrice","toFixed","setPriceTime","Date","regularMarketTime","quote","indicators","prices","timestamp","map","index","x","y","open","high","low","close","round","setSeries","error","setTimeout","clearTimeout","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/kashyap_sri/Desktop/Shreyas/stock_market/frontend/src/Components/ticker.js"],"sourcesContent":["import react,{useState,useEffect} from 'react'\n\nconst proxy=\"https://cors-anywhere.herokuapp.com/\"\nconst newUrl=`${proxy}https://query1.finance.yahoo.com/v8/finance/chart/AAPL?symbol=AAPL&period1=1634841000&period2=1660501800&useYfid=true&interval=1d&includePrePost=true&events=div%7Csplit%7Cearn&lang=en-US&region=US&crumb=m%2FlQLK.F88U&corsDomain=finance.yahoo.com`\n\nasync function fetchData() {\n  const response = await fetch(newUrl);\n  return response.json();\n}\n\nexport default function Ticker(){\n  const[price,setPrice]=useState(0) \n\n  useEffect(() => {\n    let timeoutId;\n    async function getLatestPrice() {\n      try {\n        const data = await fetchData();\n        console.log(data);\n        const stock = data.chart.result[0];\n        setPrice(stock.meta.regularMarketPrice.toFixed(2));\n        setPriceTime(new Date(stock.meta.regularMarketTime * 1000));\n        const quote = stock.indicators.quote[0];\n        const prices = stock.timestamp.map((timestamp, index) => ({\n          x: new Date(timestamp * 1000),\n          y: [quote.open[index], quote.high[index], quote.low[index], quote.close[index]].map(round)\n        }));\n        setSeries([{\n          data: prices,\n        }]);\n      } catch (error) {\n        console.log(error);\n      }\n      timeoutId = setTimeout(getLatestPrice, 5000 * 2);\n    }\n\n    getLatestPrice();\n\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, []);\n  return(\n    <div>\n      Ticker\n      {price}\n    </div>\n  )\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAEC,QAAQ,EAACC,SAAS,QAAO,OAAO;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,KAAK,GAAC,sCAAsC;AAClD,MAAMC,MAAM,GAAE,GAAED,KAAM,uPAAsP;AAE5Q,eAAeE,SAASA,CAAA,EAAG;EACzB,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACH,MAAM,CAAC;EACpC,OAAOE,QAAQ,CAACE,IAAI,CAAC,CAAC;AACxB;AAEA,eAAe,SAASC,MAAMA,CAAA,EAAE;EAAAC,EAAA;EAC9B,MAAK,CAACC,KAAK,EAACC,QAAQ,CAAC,GAACb,QAAQ,CAAC,CAAC,CAAC;EAEjCC,SAAS,CAAC,MAAM;IACd,IAAIa,SAAS;IACb,eAAeC,cAAcA,CAAA,EAAG;MAC9B,IAAI;QACF,MAAMC,IAAI,GAAG,MAAMV,SAAS,CAAC,CAAC;QAC9BW,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;QACjB,MAAMG,KAAK,GAAGH,IAAI,CAACI,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC;QAClCR,QAAQ,CAACM,KAAK,CAACG,IAAI,CAACC,kBAAkB,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC;QAClDC,YAAY,CAAC,IAAIC,IAAI,CAACP,KAAK,CAACG,IAAI,CAACK,iBAAiB,GAAG,IAAI,CAAC,CAAC;QAC3D,MAAMC,KAAK,GAAGT,KAAK,CAACU,UAAU,CAACD,KAAK,CAAC,CAAC,CAAC;QACvC,MAAME,MAAM,GAAGX,KAAK,CAACY,SAAS,CAACC,GAAG,CAAC,CAACD,SAAS,EAAEE,KAAK,MAAM;UACxDC,CAAC,EAAE,IAAIR,IAAI,CAACK,SAAS,GAAG,IAAI,CAAC;UAC7BI,CAAC,EAAE,CAACP,KAAK,CAACQ,IAAI,CAACH,KAAK,CAAC,EAAEL,KAAK,CAACS,IAAI,CAACJ,KAAK,CAAC,EAAEL,KAAK,CAACU,GAAG,CAACL,KAAK,CAAC,EAAEL,KAAK,CAACW,KAAK,CAACN,KAAK,CAAC,CAAC,CAACD,GAAG,CAACQ,KAAK;QAC3F,CAAC,CAAC,CAAC;QACHC,SAAS,CAAC,CAAC;UACTzB,IAAI,EAAEc;QACR,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,OAAOY,KAAK,EAAE;QACdzB,OAAO,CAACC,GAAG,CAACwB,KAAK,CAAC;MACpB;MACA5B,SAAS,GAAG6B,UAAU,CAAC5B,cAAc,EAAE,IAAI,GAAG,CAAC,CAAC;IAClD;IAEAA,cAAc,CAAC,CAAC;IAEhB,OAAO,MAAM;MACX6B,YAAY,CAAC9B,SAAS,CAAC;IACzB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN,oBACEX,OAAA;IAAA0C,QAAA,GAAK,QAEH,EAACjC,KAAK;EAAA;IAAAkC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACtC,EAAA,CAtCuBD,MAAM;AAAAwC,EAAA,GAANxC,MAAM;AAAA,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}