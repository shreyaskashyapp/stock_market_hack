{"ast":null,"code":"var _jsxFileName = \"/home/kashyap_sri/Desktop/Shreyas/stock_market/frontend/src/Components/ticker.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport Chart from 'react-apexcharts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst proxy = \"https://cors-anywhere.herokuapp.com/\";\nconst apiUrl = \"https://query1.finance.yahoo.com/v8/finance/chart/AAPL?symbol=AAPL&period1=1634841000&period2=1660501800&useYfid=true&interval=1d&includePrePost=true&events=div%7Csplit%7Cearn&lang=en-US&region=US&crumb=m%2FlQLK.F88U&corsDomain=finance.yahoo.com\";\nconst reddit = \"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=AAPL&interval=1min&apikey=Q9B5DSCXOI33L4CV.\";\nconst newUrl = `${proxy}${reddit}`;\nasync function fetchData() {\n  const response = await fetch(\"http://localhost:8081\");\n  return response.json();\n}\nexport default function Ticker() {\n  _s();\n  const [price, setPrice] = useState(0);\n  const [series, setSeries] = useState([{\n    data: []\n  }]);\n  const [chartOptions, setChartOptions] = useState({\n    chart: {\n      type: 'candlestick',\n      height: 350,\n      animations: {\n        enabled: false\n      }\n    },\n    title: {\n      text: 'CandleStick Chart',\n      align: 'left'\n    },\n    xaxis: {\n      type: 'datetime'\n    },\n    yaxis: {\n      tooltip: {\n        enabled: true\n      }\n    }\n  });\n  const chartRef = useRef(null);\n  useEffect(() => {\n    let timeoutId;\n    async function getLatestPrice() {\n      try {\n        const data = await fetchData();\n        console.log(data);\n        const stock = data.chart.result[0];\n        setPrice(stock.meta.regularMarketPrice.toFixed(2));\n        const quote = stock.indicators.quote[0];\n        const prices = stock.timestamp.map((timestamp, index) => ({\n          x: new Date(timestamp * 1000),\n          y: [quote.open[index], quote.high[index], quote.low[index], quote.close[index]]\n        }));\n        setSeries(prevSeries => [{\n          data: [...prevSeries[0].data, ...prices]\n        }]);\n\n        // Update only necessary properties of chart options\n        setChartOptions(prevOptions => {\n          var _chartRef$current;\n          return {\n            ...prevOptions,\n            xaxis: {\n              ...prevOptions.xaxis,\n              range: (_chartRef$current = chartRef.current) === null || _chartRef$current === void 0 ? void 0 : _chartRef$current.getOptions().xaxis.range // Retain the zoom level\n            }\n          };\n        });\n      } catch (error) {\n        console.log(error);\n      }\n      timeoutId = setTimeout(getLatestPrice, 5000 * 2);\n    }\n    getLatestPrice();\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, []);\n  const handleChartUpdate = () => {\n    if (chartRef.current) {\n      chartRef.current.updateSeries(series);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Ticker\", price, /*#__PURE__*/_jsxDEV(Chart, {\n      options: chartOptions,\n      series: series,\n      type: \"candlestick\",\n      width: \"100%\",\n      height: 320,\n      ref: chartRef,\n      onUpdated: handleChartUpdate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n_s(Ticker, \"+ZrwMs2pDZtaz4dWGyemhlTLtbY=\");\n_c = Ticker;\nvar _c;\n$RefreshReg$(_c, \"Ticker\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Chart","jsxDEV","_jsxDEV","proxy","apiUrl","reddit","newUrl","fetchData","response","fetch","json","Ticker","_s","price","setPrice","series","setSeries","data","chartOptions","setChartOptions","chart","type","height","animations","enabled","title","text","align","xaxis","yaxis","tooltip","chartRef","timeoutId","getLatestPrice","console","log","stock","result","meta","regularMarketPrice","toFixed","quote","indicators","prices","timestamp","map","index","x","Date","y","open","high","low","close","prevSeries","prevOptions","_chartRef$current","range","current","getOptions","error","setTimeout","clearTimeout","handleChartUpdate","updateSeries","children","options","width","ref","onUpdated","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/kashyap_sri/Desktop/Shreyas/stock_market/frontend/src/Components/ticker.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Chart from 'react-apexcharts';\n\nconst proxy = \"https://cors-anywhere.herokuapp.com/\";\nconst apiUrl = \"https://query1.finance.yahoo.com/v8/finance/chart/AAPL?symbol=AAPL&period1=1634841000&period2=1660501800&useYfid=true&interval=1d&includePrePost=true&events=div%7Csplit%7Cearn&lang=en-US&region=US&crumb=m%2FlQLK.F88U&corsDomain=finance.yahoo.com\";\nconst reddit = \"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=AAPL&interval=1min&apikey=Q9B5DSCXOI33L4CV.\";\nconst newUrl = `${proxy}${reddit}`;\n\nasync function fetchData() {\n  const response = await fetch(\"http://localhost:8081\");\n  return response.json();\n}\n\nexport default function Ticker() {\n  const [price, setPrice] = useState(0);\n  const [series, setSeries] = useState([{ data: [] }]);\n  const [chartOptions, setChartOptions] = useState({\n    chart: {\n      type: 'candlestick',\n      height: 350,\n      animations: {\n        enabled: false\n      }\n    },\n    title: {\n      text: 'CandleStick Chart',\n      align: 'left'\n    },\n    xaxis: {\n      type: 'datetime'\n    },\n    yaxis: {\n      tooltip: {\n        enabled: true\n      }\n    }\n  });\n  const chartRef = useRef(null);\n\n  useEffect(() => {\n    let timeoutId;\n\n    async function getLatestPrice() {\n      try {\n        const data = await fetchData();\n        console.log(data);\n        const stock = data.chart.result[0];\n        setPrice(stock.meta.regularMarketPrice.toFixed(2));\n        const quote = stock.indicators.quote[0];\n        const prices = stock.timestamp.map((timestamp, index) => ({\n          x: new Date(timestamp * 1000),\n          y: [quote.open[index], quote.high[index], quote.low[index], quote.close[index]]\n        }));\n        setSeries(prevSeries => [{ data: [...prevSeries[0].data, ...prices] }]);\n\n        // Update only necessary properties of chart options\n        setChartOptions(prevOptions => ({\n          ...prevOptions,\n          xaxis: {\n            ...prevOptions.xaxis,\n            range: chartRef.current?.getOptions().xaxis.range // Retain the zoom level\n          }\n        }));\n      } catch (error) {\n        console.log(error);\n      }\n      timeoutId = setTimeout(getLatestPrice, 5000 * 2);\n    }\n\n    getLatestPrice();\n\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, []);\n\n  const handleChartUpdate = () => {\n    if (chartRef.current) {\n      chartRef.current.updateSeries(series);\n    }\n  };\n\n  return (\n    <div>\n      Ticker\n      {price}\n      <Chart\n        options={chartOptions}\n        series={series}\n        type=\"candlestick\"\n        width=\"100%\"\n        height={320}\n        ref={chartRef}\n        onUpdated={handleChartUpdate}\n      />\n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}