{"ast":null,"code":"var _jsxFileName = \"/home/kashyap_sri/Desktop/Shreyas/stock_market/frontend/src/Components/ticker.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Chart from 'react-apexcharts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst proxy = \"https://cors-anywhere.herokuapp.com/\";\nconst apiUrl = \"https://query1.finance.yahoo.com/v8/finance/chart/AAPL?symbol=AAPL&period1=1634841000&period2=1660501800&useYfid=true&interval=1d&includePrePost=true&events=div%7Csplit%7Cearn&lang=en-US&region=US&crumb=m%2FlQLK.F88U&corsDomain=finance.yahoo.com\";\nconst reddit = \"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=AAPL&interval=1min&apikey=Q9B5DSCXOI33L4CV.\";\nconst newUrl = `${proxy}${reddit}`;\nasync function fetchPrice() {\n  try {\n    const response = await fetch(`http://localhost:8081/stock?symbol=${symbol}`);\n    const data = await response.json();\n    return data.stockData;\n  } catch (error) {\n    console.log(error);\n    return null;\n  }\n}\nexport default function Ticker(props) {\n  _s();\n  const [price, setPrice] = useState(0);\n  const [series, setSeries] = useState([{\n    data: []\n  }]);\n  useEffect(() => {\n    let timeoutId;\n    async function getLatestPrice() {\n      try {\n        const data = await fetchData();\n        console.log(data);\n        const stock = data.chart.result[0];\n        setPrice(stock.meta.regularMarketPrice.toFixed(2));\n        const quote = stock.indicators.quote[0];\n        const prices = stock.timestamp.map((timestamp, index) => ({\n          x: new Date(timestamp * 1000),\n          y: [quote.open[index], quote.high[index], quote.low[index], quote.close[index]]\n        }));\n        setSeries(prevSeries => [{\n          data: [...prevSeries[0].data, ...prices]\n        }]);\n        console.log(series[0]);\n      } catch (error) {\n        console.log(error);\n      }\n      timeoutId = setTimeout(getLatestPrice, 5000 * 2);\n    }\n    getLatestPrice();\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, []);\n  const chart = {\n    options: {\n      chart: {\n        type: 'candlestick',\n        height: 350\n      },\n      title: {\n        text: 'CandleStick Chart',\n        align: 'left'\n      },\n      xaxis: {\n        type: 'datetime'\n      },\n      yaxis: {\n        tooltip: {\n          enabled: true\n        }\n      }\n    },\n    series: series\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Ticker\", price, /*#__PURE__*/_jsxDEV(Chart, {\n      options: chart.options,\n      series: chart.series,\n      type: \"candlestick\",\n      width: \"100%\",\n      height: 320\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(Ticker, \"b7/WuEcKg09c7DW2ve707VMCiI0=\");\n_c = Ticker;\nvar _c;\n$RefreshReg$(_c, \"Ticker\");","map":{"version":3,"names":["React","useState","useEffect","Chart","jsxDEV","_jsxDEV","proxy","apiUrl","reddit","newUrl","fetchPrice","response","fetch","symbol","data","json","stockData","error","console","log","Ticker","props","_s","price","setPrice","series","setSeries","timeoutId","getLatestPrice","fetchData","stock","chart","result","meta","regularMarketPrice","toFixed","quote","indicators","prices","timestamp","map","index","x","Date","y","open","high","low","close","prevSeries","setTimeout","clearTimeout","options","type","height","title","text","align","xaxis","yaxis","tooltip","enabled","children","width","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/kashyap_sri/Desktop/Shreyas/stock_market/frontend/src/Components/ticker.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Chart from 'react-apexcharts';\n\nconst proxy = \"https://cors-anywhere.herokuapp.com/\";\nconst apiUrl=\"https://query1.finance.yahoo.com/v8/finance/chart/AAPL?symbol=AAPL&period1=1634841000&period2=1660501800&useYfid=true&interval=1d&includePrePost=true&events=div%7Csplit%7Cearn&lang=en-US&region=US&crumb=m%2FlQLK.F88U&corsDomain=finance.yahoo.com\"\nconst reddit=\"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=AAPL&interval=1min&apikey=Q9B5DSCXOI33L4CV.\"\nconst newUrl = `${proxy}${reddit}`\n\nasync function fetchPrice() {\n  try {\n    const response = await fetch(`http://localhost:8081/stock?symbol=${symbol}`);\n    const data = await response.json();\n    return data.stockData;\n  } catch (error) {\n    console.log(error);\n    return null;\n  }\n}\n\nexport default function Ticker(props) {\n  const [price, setPrice] = useState(0);\n  const [series, setSeries] = useState([{ data: [] }]);\n\n  useEffect(() => {\n    let timeoutId;\n\n    async function getLatestPrice() {\n      try {\n        const data = await fetchData();\n        console.log(data);\n        const stock = data.chart.result[0];\n        setPrice(stock.meta.regularMarketPrice.toFixed(2));\n        const quote = stock.indicators.quote[0];\n        const prices = stock.timestamp.map((timestamp, index) => ({\n          x: new Date(timestamp * 1000),\n          y: [quote.open[index], quote.high[index], quote.low[index], quote.close[index]]\n        }));\n        setSeries(prevSeries => [{ data: [...prevSeries[0].data, ...prices] }]);\n        console.log(series[0])\n      } catch (error) {\n        console.log(error);\n      }\n      timeoutId = setTimeout(getLatestPrice, 5000 *2);\n    }\n\n    getLatestPrice();\n\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, []);\n\n  const chart = {\n    options: {\n      chart: {\n        type: 'candlestick',\n        height: 350\n      },\n      title: {\n        text: 'CandleStick Chart',\n        align: 'left'\n      },\n      xaxis: {\n        type: 'datetime'\n      },\n      yaxis: {\n        tooltip: {\n          enabled: true\n        }\n      }\n    },\n    series: series\n  };\n\n  return (\n    <div>\n      Ticker\n      {price}\n      <Chart options={chart.options} series={chart.series} type=\"candlestick\" width=\"100%\" height={320} />\n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}